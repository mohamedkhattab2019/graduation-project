#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass book
\begin_preamble
  
\pagenumbering{roman}
\let\myTOC\tableofcontents
\renewcommand\tableofcontents{%
\myTOC
\clearpage
\pagenumbering{arabic}
}
\renewcommand{\ps@plain}{\pagestyle{fancy}}
\end_preamble
\use_default_options true
\begin_modules
algorithm2e
braille
changebars
customHeadersFooters
shapepar
eqs-within-sections
figs-within-sections
tabs-within-sections
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref page
\pdf_pdfusetitle true
\papersize a4paper
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2.54cm
\topmargin 2.54cm
\rightmargin 2.54cm
\bottommargin 2.54cm
\headheight 1cm
\headsep 1cm
\footskip 1cm
\secnumdepth 4
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Autopilot Design
\end_layout

\begin_layout Section
Mathematical Model
\end_layout

\begin_layout Standard
The mathematical model will be derived mainly to design the controller during
 phase in which the flying taxi acts as multicopter.
\end_layout

\begin_layout Subsection
Equations of Motion(
\series bold
Rigid-Body dynamics
\series default
)
\end_layout

\begin_layout Subsubsection
Kinetics 
\begin_inset Foot
status open

\begin_layout Plain Layout
the study of forces and moments on system in motion
\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\bar under
Translational motion:
\bar default
 
\begin_inset Formula $\overrightarrow{F}=\frac{d}{dt}(m\overrightarrow{v})=m(\mathring{\overrightarrow{v}}+\overrightarrow{\omega}\times\overrightarrow{v})=\overrightarrow{F}_{Aero}+\overrightarrow{F}_{motors}+\overrightarrow{g}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
This relation represents the absolute resultant force acting on the CG ,which
 is the mass multiplied by the absolute change in the velocity vector of
 the CG of the flying taxi 
\begin_inset Formula $\overrightarrow{v}=u\overrightarrow{i}+v\overrightarrow{j}+w\overrightarrow{k}$
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

but 
\begin_inset Formula $\overrightarrow{i},\overrightarrow{j},\overrightarrow{k}$
\end_inset

are unit vector in body axes directions which change direction with time
 so the absolute change is the sum of change in 
\bar under
magnitudes 
\begin_inset Formula $\mathring{\overrightarrow{v}}=\mathring{u}\overrightarrow{i}+\mathring{v}\overrightarrow{j}+\mathring{w}\overrightarrow{k}$
\end_inset


\begin_inset space ~
\end_inset


\bar default

\begin_inset space ~
\end_inset

and 
\bar under
directions 
\begin_inset Formula $\overrightarrow{\omega}\times\overrightarrow{v}$
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\bar default

\begin_inset space ~
\end_inset

.
 Using body axes directions in translational motion is very beneficial as
 the inertial sensors gives its measurements in body axes so it's more suitable.
\end_layout

\begin_layout Itemize
\begin_inset Formula $\overrightarrow{F}_{Aero}$
\end_inset

can be ignored because during multicopter phase, the flying taxi encounters
 negligible aerodynamic force due to low speed
\end_layout

\begin_layout Itemize
\begin_inset Formula $\overrightarrow{F}_{motors}=\sum_{i=1}^{4}[-\frac{1}{2}\rho AC(\omega_{i}R_{propeller})^{2}]\overrightarrow{k}=\sum_{i=1}^{4}[-b_{i}\omega_{prop,i}^{2}]\overrightarrow{k}$
\end_inset


\begin_inset Newline newline
\end_inset

where 
\begin_inset Formula $b_{i}$
\end_inset

is constant can be obtained for every motor relates the square of the angular
 velocity of the motor 
\begin_inset Formula $\omega_{prop,i}^{2}$
\end_inset

to the generated thrust and the summation of the thrust of each motor holds
 the total thrust 
\begin_inset Formula $\overrightarrow{F}_{motors}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\overrightarrow{g}=C_{IB}\left[\begin{array}{c}
0\\
0\\
mg
\end{array}\right]$
\end_inset


\begin_inset Newline newline
\end_inset

where 
\begin_inset Formula $C_{BI}$
\end_inset

 is the rotation matrix from inertia axes to body axes according to ZYX
 euler angles(
\begin_inset Formula $\psi,\theta,\phi$
\end_inset

) will be derived later in the kinematics study
\begin_inset Newline newline
\end_inset


\begin_inset Formula $\therefore\overrightarrow{g}=mg\left[\begin{array}{c}
-sin(\theta)\\
cos(\theta)sin(\phi)\\
cos(\phi)cos(\theta)
\end{array}\right]$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\bar under
Rotational motion:
\bar default
 
\begin_inset Formula $\overrightarrow{M}=\frac{d}{dt}(I\overrightarrow{\omega})=I\mathring{\overrightarrow{\omega}}+\overrightarrow{\omega}\times I\overrightarrow{\omega}=\overrightarrow{M}_{motors}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula 
\begin{align*}
\overrightarrow{M}_{motors} & =\overrightarrow{M}_{thrust\,induced}+\overrightarrow{M}_{drag\,induced}\\
 & =\left[\begin{array}{c}
l(T_{3}+T_{2}-T_{1}-T_{4})\\
l(T_{1}+T_{3}-T_{2}-T_{4})\\
0
\end{array}\right]+\left[\begin{array}{c}
0\\
0\\
-d_{1}\omega_{1}^{2}-d_{2}\omega_{2}^{2}+d_{3}\omega_{3}^{2}+d_{4}\omega_{4}^{2}
\end{array}\right]=\left[\begin{array}{c}
M_{x}\\
M_{y}\\
M_{z}
\end{array}\right]
\end{align*}

\end_inset


\begin_inset Newline newline
\end_inset

where 
\begin_inset Formula $\left\Vert M_{drag\,induced,i}\right\Vert =d_{i}\omega_{i}^{2}$
\end_inset

 and 
\begin_inset Formula $d_{i}$
\end_inset

 relates the square of the motor angular velocity and the generated torque
 on the motor base due to the aerodynamic resistance to the moving propeller
 which propagates to the flying taxi body from each motor.
\begin_inset Newline newline
\end_inset

motor 1: CCW drag , motor 2: CW drag , motor 3: CCW drag , motor 4: CW drag
\begin_inset Newline newline
\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/pasted1.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
motor configuration
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize
also 
\begin_inset Formula $T_{i}=b_{i}\omega_{i}^{2}$
\end_inset


\begin_inset Newline newline
\end_inset

It's better to design the controller using 
\begin_inset Formula $M_{x},M_{y},M_{z}$
\end_inset

instead of 
\begin_inset Formula $\omega_{i}^{2}$
\end_inset

 to make the controller independent of the configuration so we need a control
 allocation (or mixing) law to map the controller output to a required angular
 velocity for each motor.
\end_layout

\begin_layout Itemize
This relation represents the absolute resultant moment around the CG , represent
ed in the body axes directions which is very beneficial also in derivation
 because inertia is usually constant in body axes in contrast to fixed axes
 beside the previous reason stated in the translational motion.
\end_layout

\begin_layout Itemize
\begin_inset Formula $I$
\end_inset

is the inertia tensor in body axes.
 For our flying taxi it's symmetric about xz plane 
\begin_inset Formula $\therefore I=\left[\begin{array}{ccc}
Ixx & 0 & -Ixz\\
0 & Iyy & 0\\
-Ixz & 0 & Izz
\end{array}\right]$
\end_inset


\end_layout

\begin_layout Itemize
angular velocity of the flying taxi 
\begin_inset Formula $\overrightarrow{\omega}=p\overrightarrow{i}+q\overrightarrow{j}+r\overrightarrow{k}$
\end_inset


\end_layout

\begin_layout Itemize
absolute change of 
\begin_inset Formula $I\overrightarrow{\omega}$
\end_inset

is the sum of change in 
\bar under
magnitudes 
\begin_inset Formula $I\mathring{\overrightarrow{\omega}}=I(\mathring{p}\overrightarrow{i}+\mathring{q}\overrightarrow{j}+\mathring{r}\overrightarrow{k})$
\end_inset


\bar default
 and 
\bar under
directions 
\begin_inset Formula $\overrightarrow{\omega}\times I\overrightarrow{\omega}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Kinematics 
\begin_inset Foot
status open

\begin_layout Plain Layout
the study of motion without regard to forces or moments
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using ZYX euler angles (
\begin_inset Formula $\psi,\theta,\phi$
\end_inset

), the transformation matrix which can be used to transform vectors from
 inertial axes to body axes is:
\begin_inset Newline newline
\end_inset


\begin_inset Formula $C_{IB}=\left[\begin{array}{ccc}
cos(\psi)cos(\theta) & cos(\theta)sin(\psi) & -sin(\theta)\\
-cos(\phi)sin(\psi)+cos(\psi)sin(\phi)sin(\theta) & cos(\phi)cos(\psi)+sin(\phi)sin(\psi)sin(\theta) & cos(\theta)sin(\phi)\\
sin(\phi)sin(\psi)+cos(\phi)cos(\psi)sin(\theta) & -cos(\psi)sin(\phi)+cos(\phi)sin(\psi)sin(\theta) & cos(\phi)cos(\theta)
\end{array}\right]$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\therefore\left[\begin{array}{c}
\mathring{X}\\
\mathring{Y}\\
\mathring{Z}
\end{array}\right]=C_{BI}\left[\begin{array}{c}
u\\
v\\
w
\end{array}\right]$
\end_inset

 
\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

where 
\begin_inset Formula $C_{BI}=C_{IB}^{T}$
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

is the transform from body to inertial axes.
\end_layout

\begin_layout Standard
As ZYX euler angles represents rotation from :
\end_layout

\begin_layout Enumerate
body axes around Z to intermediate axes(1) with angle 
\begin_inset Formula $\psi$
\end_inset


\end_layout

\begin_layout Enumerate
intermediate axes(1) around y1 to intermediate axes(2) with angle 
\begin_inset Formula $\theta$
\end_inset


\end_layout

\begin_layout Enumerate
intermediate axes(2) around x2 to body axes with angle 
\begin_inset Formula $\phi$
\end_inset


\end_layout

\begin_layout Standard
so 
\begin_inset Formula $\mathring{\psi}$
\end_inset

is in Z direction , 
\begin_inset Formula $\mathring{\theta}$
\end_inset

 is in y1 direction , and 
\begin_inset Formula $\mathring{\phi}$
\end_inset

 is in x2 direction
\end_layout

\begin_layout Standard
\begin_inset Formula $\therefore\overrightarrow{\omega}=p\overrightarrow{i}+q\overrightarrow{j}+r\overrightarrow{k}=\mathring{\psi}\overrightarrow{K}_{inertial}+\mathring{\theta}\overrightarrow{j_{1}}+\mathring{\phi}\overrightarrow{i_{2}}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\because\overrightarrow{K}_{inertial}=[3rd\,row\,of\,C_{BI}].\left[\begin{array}{c}
1\\
1\\
1
\end{array}\right]=[3rd\,row\,of\,C_{BI}]^{T}=\left[\begin{array}{c}
-sin(\theta)\\
cos(\theta)sin(\phi)\\
cos(\phi)cos(\theta)
\end{array}\right]$
\end_inset


\end_layout

\begin_layout Standard
, 
\begin_inset Formula $\overrightarrow{j_{1}}=\overrightarrow{j_{2}}=[2nd\,row\,R_{x}(\phi)]^{T}=\left[\begin{array}{c}
0\\
cos(\phi)\\
-sin(\phi)
\end{array}\right]$
\end_inset


\end_layout

\begin_layout Standard
, 
\begin_inset Formula $\overrightarrow{i_{2}}=\overrightarrow{i}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\therefore\overrightarrow{\omega}=\left[\begin{array}{c}
p\\
q\\
r
\end{array}\right] & =\mathring{\psi}\left[\begin{array}{c}
-sin(\theta)\\
cos(\theta)sin(\phi)\\
cos(\phi)cos(\theta)
\end{array}\right]+\mathring{\theta}\left[\begin{array}{c}
0\\
cos(\phi)\\
-sin(\phi)
\end{array}\right]+\mathring{\phi}\left[\begin{array}{c}
1\\
0\\
0
\end{array}\right]\\
\therefore\left[\begin{array}{c}
p\\
q\\
r
\end{array}\right] & =\left[\begin{array}{ccc}
1 & 0 & -sin(\theta)\\
0 & cos(\phi) & cos(\theta)sin(\phi)\\
0 & -sin(\phi) & cos(\phi)cos(\theta)
\end{array}\right]\left[\begin{array}{c}
\mathring{\phi}\\
\mathring{\theta}\\
\mathring{\psi}
\end{array}\right]\\
\therefore\left[\begin{array}{c}
\mathring{\phi}\\
\mathring{\theta}\\
\mathring{\psi}
\end{array}\right] & =\left[\begin{array}{ccc}
1 & sin(\phi)tan(\theta) & cos(\phi)tan(\theta)\\
0 & cos(\phi) & -sin(\phi)\\
0 & sin(\phi)sec(\theta) & cos(\phi)sec(\theta)
\end{array}\right]\left[\begin{array}{c}
p\\
q\\
r
\end{array}\right]
\end{align*}

\end_inset


\end_layout

\begin_layout Subsubsection
Resultant Nonlinear model
\end_layout

\begin_layout Standard
from the previous dynamics (kinetics and kinematics) study, we get the nonlinear
 system which is 12 equations in 12 unknowns (states) .
\end_layout

\begin_layout Standard

\bar under
states:
\bar default
 u , v , w , p ,q , r , X , Y , Z , 
\begin_inset Formula $\phi$
\end_inset

, 
\begin_inset Formula $\theta$
\end_inset

 , 
\begin_inset Formula $\psi$
\end_inset


\end_layout

\begin_layout Standard

\bar under
system:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\mathring{u} & =-gsinθ-qw+rv\\
\mathring{v} & =gcosθsinϕ-ru+pw\\
\mathring{w} & =gcosθcosϕ-pv+qu-\frac{T_{allmotors}}{m}\\
\mathring{p} & =\frac{Iy-Iz}{Ix}qr+\frac{M_{x}}{I_{x}}\\
\mathring{q} & =\frac{Iz-Ix}{Iy}pr+\frac{My}{Iy}\\
\mathring{r} & =\frac{Iy-Ix}{Iz}pq+\frac{M_{z}}{Iz}\\
\mathring{\phi} & =p+qsinϕtanθ+rcosϕtanθ\\
\mathring{\theta} & =qcosϕ-rsinϕ\\
\mathring{\psi} & =qsinϕsecθ+rcosϕsecθ\\
\mathring{X} & =[cos(θ)cos(ψ)]u+[sin(ϕ)cos(ψ)-cos(ϕ)sin(ψ)]v+[cos(ϕ)cos(ψ)+sin(ϕ)sin(ψ)]w\\
\mathring{Y} & =[cos(θ)sin(ψ)]u+[sin(ϕ)sin(θ)sin(ψ)+cos(ϕ)cos(ψ)]v+[cos(ϕ)sin(θ)sin(ψ)-sin(ϕ)cos(ψ)]w\\
\mathring{Z} & =[-sin(θ)]u+[sin(ϕ)cos(θ)]v+[cos(ϕ)cos(θ)]w
\end{align}

\end_inset


\end_layout

\begin_layout Standard

\bar under
Notes:
\end_layout

\begin_layout Itemize
from equ.s (4,5,6,7,8,9) , we have full control over all attitude angles
 (
\begin_inset Formula $\phi$
\end_inset

, 
\begin_inset Formula $\theta$
\end_inset

 , 
\begin_inset Formula $\psi$
\end_inset

) using 
\begin_inset Formula $M_{x},M_{y},M_{z}$
\end_inset


\end_layout

\begin_layout Itemize
from equ.
 (3,12) , we have direct control over Z (so altitude) using 
\begin_inset Formula $T_{allmotors}$
\end_inset


\end_layout

\begin_layout Itemize
from equ.s (1,2,10,11) , we don't have direct control over positions (X ,Y)
 but we can using attitude, so if we want to control the position we can't
 independently set specific attitude as it will be determined based on the
 required position.
\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Subsection
Linearization 
\end_layout

\begin_layout Standard
We linearize the dynamics of the flying taxi around equilibrium point at
 hovering where : 
\end_layout

\begin_layout Standard
all rates = 0 , 
\begin_inset Formula $\phi=\theta=0$
\end_inset

, 
\begin_inset Formula $p=q=r=0$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\therefore\mathring{u} & =-g\theta\label{u_rate}\\
\mathring{v} & =-g\phi\label{v_rate}\\
\mathring{w} & =-\frac{\Delta T_{allmotors}}{m}\label{w_rate}\\
\mathring{p} & =\frac{M_{x}}{Ix}\label{p_rate_equ}\\
\mathring{q} & =\frac{M_{y}}{Iy}\label{q_rate}\\
\mathring{r} & =\frac{Mz}{Iz}\label{r_rate}\\
\mathring{\phi} & =p\label{roll_rate_equ}\\
\mathring{\theta} & =q\label{pitch rate}\\
\mathring{\psi} & =r\label{yaw_rate}\\
\mathring{X} & =u\label{X_rate}\\
\mathring{Y} & =v\label{Y_rate}\\
\mathring{Z} & =w\label{Z_rate}
\end{align}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\mathring{u},\mathring{v},\mathring{X},\mathring{Y}$
\end_inset

 considered not so good approximations as will be proved later by comparing
 linear and nonlinear models but we will use them only to estimate initial
 gains for guidance system.
\end_layout

\begin_layout Subsection
Parameters
\end_layout

\begin_layout Standard
from Solidworks model we can get initial estimates for the flying taxi parameter
s needed to design the controller in the next step:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
m
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $kg$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ix
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.050595
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $kg.m^{2}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Iy
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.0817086
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $kg.m^{2}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Iz
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.117281
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $kg.m^{2}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
Autopilot
\end_layout

\begin_layout Subsection
Autopilot design
\end_layout

\begin_layout Standard
From previous notes we stated after deriving the nonlinear model, we designed
 our control block diagram to be as follows:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/control loops of autopilot.png
	lyxscale 80
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Autopilot design
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Attitude controller
\end_layout

\begin_layout Standard

\series bold
\bar under
Roll Controller:
\end_layout

\begin_layout Standard
From Linearization section using equations( 
\begin_inset CommandInset ref
LatexCommand ref
reference "p_rate_equ"
plural "false"
caps "false"
noprefix "false"

\end_inset

),(
\begin_inset CommandInset ref
LatexCommand ref
reference "roll_rate_equ"
plural "false"
caps "false"
noprefix "false"

\end_inset

): 
\begin_inset Formula $\therefore\ddot{\phi}=\frac{Mx}{Ix}\Rightarrow G_{phi}=\frac{\phi}{Mx}=\frac{1}{Ix\,s^{2}}$
\end_inset


\end_layout

\begin_layout Standard
ignoring motor dynamics as it has fast response w.r.t.
 vehicle dynamics
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/pitch controller.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Roll Controller
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using Matlab SISO tool to obtain robust controller : 
\begin_inset Formula $P=0.025298$
\end_inset

 , 
\begin_inset Formula $D=0.043$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
The roll step response and control action for linear and nonlinear models
 using the designed roll controller:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/roll.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Roll Step response and control action
\end_layout

\end_inset


\end_layout

\end_inset

The response for 5 deg desired roll input and control action (to show the
 effect of larger input on the nonlinear model) :
\begin_inset Newline newline
\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/roll_5deg.bmp
	lyxscale 50
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
5 deg desired Roll input
\end_layout

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Standard

\series bold
\bar under
Pitch Controller:
\end_layout

\begin_layout Standard
From Linearization section using equations( 
\begin_inset CommandInset ref
LatexCommand ref
reference "q_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

),(
\begin_inset CommandInset ref
LatexCommand ref
reference "pitch rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

): 
\begin_inset Formula $\therefore\ddot{\theta}=\frac{My}{Iy}\Rightarrow G_{\theta}=\frac{\theta}{My}=\frac{1}{Iy\,s^{2}}$
\end_inset


\end_layout

\begin_layout Standard
ignoring motor dynamics as it has fast response w.r.t.
 vehicle dynamics
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/pitch controller.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Pitch Controller
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using Matlab SISO tool to obtain robust controller : 
\begin_inset Formula $P=0.040854$
\end_inset

 , 
\begin_inset Formula $D=0.06945$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
Note: Higher gains for pitch than roll due to higher Iy than Ix so the controlle
r needs to exert more effort to move the vehicle in pitch direction 
\end_layout

\begin_layout Standard
The pitch step response and control action for linear and nonlinear models
 using the designed pitch controller:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/pitch.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Pitch Step response and control action
\end_layout

\end_inset


\end_layout

\end_inset

The response for 5 deg desired pitch input and control action (to show the
 effect of larger input on the nonlinear model) :
\begin_inset Newline newline
\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/pitch_5deg.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
5 deg desired pitch input
\end_layout

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Standard

\series bold
\bar under
Yaw Controller:
\end_layout

\begin_layout Standard
From Linearization section using equations( 
\begin_inset CommandInset ref
LatexCommand ref
reference "r_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

),(
\begin_inset CommandInset ref
LatexCommand ref
reference "yaw_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

): 
\begin_inset Formula $\therefore\ddot{\psi}=\frac{Mz}{Iz}\Rightarrow G_{\psi}=\frac{\psi}{Mz}=\frac{1}{Iz\,s^{2}}$
\end_inset


\end_layout

\begin_layout Standard
ignoring motor dynamics as it has fast response w.r.t.
 vehicle dynamics
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/yaw controller.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Yaw Controller
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using Matlab SISO tool to obtain robust controller : 
\begin_inset Formula $P=0.058641$
\end_inset

 , 
\begin_inset Formula $D=0.1$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
Note: Higher gains for yaw than roll and pitch due to higher Iz than Iy
 and Ix so the controller needs to exert more effort to move the vehicle
 in yaw direction 
\end_layout

\begin_layout Standard
The yaw step response and control action for linear and nonlinear models
 using the designed yaw controller:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/yaw.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Yaw Step response and control action
\end_layout

\end_inset


\end_layout

\end_inset

The response for 5 deg desired Yaw input and control action (to show the
 effect of larger input on the nonlinear model) :
\begin_inset Newline newline
\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/yaw_5deg.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
5 deg desired yaw input
\end_layout

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Standard

\series bold
\bar under
Roll,Pitch and Yaw Controllers together in action:
\series default
\bar default

\begin_inset Newline newline
\end_inset

As we see from the nonlinear model all attitude states affects each others
 (Coupled) so we need to verify that there disturbance on each other won't
 lead to bad performance or even instability.
 As shown the linear model is decoupled which isn't the case in reality.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/Coupling_R5_P0_Y5.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
desired roll = 5 deg , desired pitch = 0 , desired yaw = 5
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Altitude Controller
\end_layout

\begin_layout Standard
From Linearization section using equations( 
\begin_inset CommandInset ref
LatexCommand ref
reference "w_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

),(
\begin_inset CommandInset ref
LatexCommand ref
reference "Z_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

): 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\therefore\ddot{Z}=-\frac{\Delta T_{allmotors}}{m}\Rightarrow G_{Z}=\frac{Z}{\Delta T_{allmotors}}=\frac{1}{m\,s^{2}}
\]

\end_inset


\end_layout

\begin_layout Standard
ignoring motor dynamics as it has fast response w.r.t.
 vehicle dynamics
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/altitude controller.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Altitude Controller
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using Matlab SISO tool to obtain robust controller : 
\begin_inset Formula $P=0.7$
\end_inset

 , 
\begin_inset Formula $D=1.19$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
Note: Higher gains for altitude than attitude due to higher mass than inertia
 as values.
\end_layout

\begin_layout Standard
The altitude step response (Z = -1 m) and control action for linear and
 nonlinear models using the designed yaw controller:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/altitude_1m.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Altitude Step response and control action
\end_layout

\end_inset


\end_layout

\end_inset

The response for -4 m (Z = 4 m) desired altitude input and control action
 (to show the effect of larger input on the nonlinear model) :
\begin_inset Newline newline
\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/altitude_-4m.bmp
	lyxscale 70
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
4m altitude input
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Note : Negative 
\begin_inset Formula $\Delta T_{allmotors}$
\end_inset

doesn't mean reversed motors thrust but means that the thrust will decrease
 below nominal thrust.
\end_layout

\begin_layout Subsubsection
Attitude & Altitude controllers together in action
\end_layout

\begin_layout Standard
We will study the effect of changing both attitude and altitude because
 as appearing in the nonlinear model the attitude is affecting the altitude
 so we should verify that the altitude controller can handle this effect
 which considered relative to the altitude controller as external disturbance
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/coupling_R-5_P-5_Z-4.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
desired roll = -5 deg , desired pitch = -5 deg , desired altitude = -4 m
 ( Z = 4 m) 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Line-of-sight (LOS) Guidance
\end_layout

\begin_layout Standard
LOS guidance is a method used to guide a vehicle between 2 waypoints using
 2 types of errors : along-track error and cross-track error by calculating
 both of them we can then choose pitching to eliminate along-track error
 and rolling to eliminate cross-track error.
 From the previous waypoint and current one we can get the desired yaw angle.
 LOS can be more complicated espically for fixed wing as we can't control
 rolling without changing yaw angle which isn't the case for us during multicopt
er flight phase of the flying taxi.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LOS.png
	lyxscale 70
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LOS
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\alpha_{k} & =tan^{-1}\left(\frac{Y_{des}^{k}-Y_{des}^{k-1}}{X_{des}^{k}-X_{des}^{k-1}}\right)\\
\psi_{des} & =\alpha_{k}\\
e_{cross-track} & =-(X-X_{des}^{k-1})sin(\alpha_{k})+(Y-Y_{des}^{k-1})cos(\alpha_{k})\\
s & =(X-X_{des}^{k-1})cos(\alpha_{k})+(Y-Y_{des}^{k-1})sin(\alpha_{k})\\
R & =\sqrt{(Y_{des}^{k}-Y_{des}^{k-1})^{2}+(X_{des}^{k}-X_{des}^{k-1})^{2}}\\
e_{along-track} & =R-s
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LOS block diagram.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LOS block diagram
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Our strategy to get PID values is using the linearized model to design a
 controller as initial estimate then using LabVIEW simulation of the nonlinear
 model we can tune the controller for better performance.
\end_layout

\begin_layout Standard
From equ.s (
\begin_inset CommandInset ref
LatexCommand ref
reference "u_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

),(
\begin_inset CommandInset ref
LatexCommand ref
reference "X_rate"
plural "false"
caps "false"
noprefix "false"

\end_inset

) : 
\begin_inset Formula $\ddot{X}=-g\theta\Rightarrow G_{X}=\frac{X}{\theta}=\frac{-g}{s^{2}}$
\end_inset


\end_layout

\begin_layout Standard
It's clear that the linearized model only accounts for g component effect
 but the 
\begin_inset Formula $\Delta T_{allmotors}$
\end_inset

component doesn't appear
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/X guidance.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
X guidance
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using SISO tool : 
\begin_inset Formula $P=-0.00063466$
\end_inset

 , 
\begin_inset Formula $D=-0.0159$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/along track control_alt_contr_effect.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
along-track control (trial : 1)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
changing the gains in LabVIEW Simulation (Shown in the next section) by
 giving input way point (X=1 , Y=0 , Z=-1):
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW frontpanel.png
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW front panel
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/along track control_newGains.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
along-track control (trial : 2 increasing P) : high steady-state error
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/along track control_newGains2_decreaseKd.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
along-track control (trial : 2 decreasing D) : high steady-state error and
 the settling time is increased (as expected but we only wanted see the
 effect)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/along track control_newGains2_with Iterm.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
along-track control (trial : 3 adding small I term to eliminate steady-state
 error) : settling time is highly increased
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/along track control.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
along-track error control (final trial) : increasing P and D
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
gains from linearized model : 
\begin_inset Formula $P=-0.00063466$
\end_inset

 , 
\begin_inset Formula $D=-0.0159$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
new gains after tunning using nonlinear simulation : 
\series bold

\begin_inset Formula $P=-0.002$
\end_inset

 , 
\begin_inset Formula $D=-0.2$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\begin_inset Newline newline
\end_inset


\series default
in all previous results the altitude control is working as could be seen
 fron Z-force response.
 
\series bold

\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Similarly, For cross-track error we used the same procedure: 
\begin_inset Formula $\ddot{Y}=-g\phi\Rightarrow G_{Y}=\frac{Y}{\phi}=\frac{-g}{s^{2}}$
\end_inset


\end_layout

\begin_layout Standard
As before it's clear that the linearized model only accounts for g component
 effect but the 
\begin_inset Formula $\Delta T_{allmotors}$
\end_inset

component doesn't appear
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/Y guidance.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Y guidance
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using SISO tool : 
\begin_inset Formula $P=-0.00063473$
\end_inset

 , 
\begin_inset Formula $D=-0.0159$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset

 
\begin_inset space ~
\end_inset

approximately the same as linear X-guidance because the only difference
 is in the 
\begin_inset Formula $\frac{\phi}{\phi_{req}}$
\end_inset

 instead of 
\begin_inset Formula $\frac{\theta}{\theta_{req}}$
\end_inset

 which, from our designed attitude controller results, is fast compared
 to X , Y responses
\end_layout

\begin_layout Standard
So we used the previously tuned gains from nonlinear simulation: 
\series bold

\begin_inset Formula $P=-0.002$
\end_inset

 , 
\begin_inset Formula $D=-0.2$
\end_inset

 , 
\begin_inset Formula $I=0$
\end_inset


\end_layout

\begin_layout Standard
Now we run the nonlinear simulation by giving input waypoint(X=0 , Y=1 ,
 Z=-1):
\end_layout

\begin_layout Standard
as seen from the figure below , the yaw angle is changed to -90 deg quickly
 so the cross-track became along-track error
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/guidance_y_only.bmp
	lyxscale 80
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
X,Y guidance waypoint(X=0 , Y=1 , Z=-1)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Intermediate case input waypoint (X=1 , Y=1 , Z=-1):
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/XYG1.png
	width 45col%

\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/XYG2.png
	width 45col%

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/XYG3.png
	width 45col%

\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/XYG4.png
	width 45col%

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/XYG5.png
	width 45col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
X,Y Guidance waypoint(X=1 , Y=1 , Z=-1)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Simulation using LabVIEW
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW frontpanel.png
	lyxscale 80
	width 50page%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW front panel
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW blockdiagram.png
	lyxscale 80
	width 50col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW blockdiagram
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW guidance bloackdiagram.png
	lyxscale 80
	width 80page%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW Guidance blockdiagram
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW altitude  blockdiagram.png
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW altitude BD
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename D:/Study/Graduation Project/final month6/grad_project/documentation6/final documentation/iteration_3/Chapters/ch3 AP/pics/LabVIEW attitude  blockdiagram.png
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
LabVIEW attitude controller BD
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Commercial Autopilot
\end_layout

\begin_layout Subsection
Gains Comparison
\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\end_body
\end_document
